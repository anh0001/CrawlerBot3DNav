<launch>
    <!-- Create the rosbag directory if it does not exist -->
    <arg name="rosbag_dir" default="$(find your_package_name)/rosbag"/>
    <param name="~dir" value="$(arg rosbag_dir)"/>

    <!-- Start recording using rosbag -->
    <node pkg="rosbag" type="record" name="rosbag_record" required="true" output="screen">
        <param name="topics" value="
            /camera/color/camera_info
            /camera/color/image_raw
            /camera/depth/camera_info
            /camera/depth/image_rect_raw
            /camera/depth/color/points
            /camera/imu
            /livox/imu
            /livox/lidar
            /tf
            /tf_static"/>
        <param name="output_prefix" value="$(arg rosbag_dir)/recording_$(eval datetime.datetime.now().strftime('%Y%m%d_%H%M%S'))"/>
    </node>
</launch>
